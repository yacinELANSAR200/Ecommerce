<section>
  <div class="container">
    <h1>Register Form</h1>
    <form [formGroup]="registrationForm" (ngSubmit)="submit()">
      <div class="field">
        <p-inputGroup>
          <p-inputGroupAddon>
            <i class="pi pi-user"></i>
          </p-inputGroupAddon>
          <input
           [autofocus]="true"
            pAutoFocus
            pInputText
            placeholder="firstName"
            formControlName="firstName"
            class="w-full border-round-md border-1 border-black-alpha-20"
          />
        </p-inputGroup>
        <div class="validation-msg">
          @if (firstName?.touched ) {
          @if(firstName?.getError('required')) {
          <p-messages
            [value]="[
              {
                severity: 'error',
                summary: 'validation error',
                detail: 'name is required'
              }
            ]"
            [enableService]="false"
            [closable]="false"
          />
          }
          @if(firstName?.getError('minlength')) {
          <p-messages
            [value]="[
              {
                severity: 'error',
                summary: 'validation error',
                detail: 'name minlength is 3'
              }
            ]"
            [enableService]="false"
            [closable]="false"
          />
          }
          @if(firstName?.getError('maxlength')) {
          <p-messages
            [value]="[
              {
                severity: 'error',
                summary: 'validation error',
                detail: 'name maxlength is 20'
              }
            ]"
            [enableService]="false"
            [closable]="false"
          />
          }
        }
        </div>
      </div>
      <div class="field">
        <p-inputGroup>
          <p-inputGroupAddon>
            <i class="pi pi-user"></i>
          </p-inputGroupAddon>
          <input
            pInputText
            placeholder="lastName"
            formControlName="lastName"
            class="w-full border-round-md border-1 border-black-alpha-20"
          />
        </p-inputGroup>
        <div class="validation-msg">
          @if (lastName?.touched ) {
          @if(lastName?.getError('required')) {
          <p-messages
            [value]="[
              {
                severity: 'error',
                summary: 'validation error',
                detail: 'name is required'
              }
            ]"
            [enableService]="false"
            [closable]="false"
          />
          }
          @if(lastName?.getError('minlength')) {
          <p-messages
            [value]="[
              {
                severity: 'error',
                summary: 'validation error',
                detail: 'name minlength is 3'
              }
            ]"
            [enableService]="false"
            [closable]="false"
          />
          }
          @if(lastName?.getError('maxlength')) {
          <p-messages
            [value]="[
              {
                severity: 'error',
                summary: 'validation error',
                detail: 'name maxlength is 20'
              }
            ]"
            [enableService]="false"
            [closable]="false"
          />
          }
        }
        </div>
      </div>
      <div class="field">
        <p-inputGroup>
          <p-inputGroupAddon>
            <i class="pi pi-user"></i>
          </p-inputGroupAddon>
          <input
            pInputText
            placeholder="username"
            formControlName="username"
            class="w-full border-round-md border-1 border-black-alpha-20"
          />
        </p-inputGroup>
        <div class="validation-msg">
          @if (username?.touched ) {
          @if(username?.getError('required')) {
          <p-messages
            [value]="[
              {
                severity: 'error',
                summary: 'validation error',
                detail: 'name is required'
              }
            ]"
            [enableService]="false"
            [closable]="false"
          />
          }
          @if(username?.getError('minlength')) {
          <p-messages
            [value]="[
              {
                severity: 'error',
                summary: 'validation error',
                detail: 'name minlength is 3'
              }
            ]"
            [enableService]="false"
            [closable]="false"
          />
          }
          @if(username?.getError('maxlength')) {
          <p-messages
            [value]="[
              {
                severity: 'error',
                summary: 'validation error',
                detail: 'name maxlength is 20'
              }
            ]"
            [enableService]="false"
            [closable]="false"
          />
          }
        }
        </div>
      </div>

      <div class="field">
        <p-inputGroup>
          <p-inputGroupAddon>
            <i class="pi pi-lock"></i>
          </p-inputGroupAddon>

          <!-- <input
            pInputText
            placeholder="Password"
            formControlName="password"
            type="password"
            class="w-full"
          /> -->
           <p-password
            styleClass="w-full"
            placeholder="Password"
            formControlName="password"
            type="password"
            promptLabel="Choose a password"
            weakLabel="Too simple"
            mediumLabel="Average complexity"
            strongLabel="Complex password"
            [toggleMask]="true"
          />
        </p-inputGroup>
        <div class="validation-msg">
          @if (password?.touched ) {
          @if(password?.getError('required')) {
          <p-messages
            [value]="[
              {
                severity: 'error',
                summary: 'validation error',
                detail: 'Paasword is required'
              }
            ]"
            [enableService]="false"
            [closable]="false"
          />
          }
          @if(password?.getError('minlength')) {
          <p-messages
            [value]="[
              {
                severity: 'error',
                summary: 'validation error',
                detail: 'passwordminlength is 3'
              }
            ]"
            [enableService]="false"
            [closable]="false"
          />
          }
          @if(password?.getError('maxlength')) {
          <p-messages
            [value]="[
              {
                severity: 'error',
                summary: 'validation error',
                detail: 'password maxlength is 20'
              }
            ]"
            [enableService]="false"
            [closable]="false"
          />
          }
         }
        </div>
      </div>
      <div class="field">
        <p-inputGroup >
          <p-inputGroupAddon>
            <i class="pi pi-lock"></i>
          </p-inputGroupAddon>

          <input
            pInputText
            type="text"
            name="rePassword"
            placeholder="RePassword"
            formControlName="rePassword"
            type="password"
            class="w-full border-round-md border-1 border-black-alpha-20 focus\:surface-500"
          />
        </p-inputGroup>
        <div class="validation-msg">
          @if (rePassword?.touched && rePassword?.dirty ) {
          @if(rePassword?.getError('passwordMismatch')) {
          <p-messages
            [value]="[
              {
                severity: 'error',
                summary: 'validation error',
                detail: 'password Mismatch'
              }
            ]"
            [enableService]="false"
            [closable]="false"
          />
          }


        }
        </div>
      </div>
      <p-button type="submit" label="Submit" />
    </form>
  </div>
  <div class="card flex justify-content-center">
    <p-toast />
</div>

</section>
<ngx-spinner
  bdColor="rgba(51,51,51,0.8)"
  size="medium"
  color="rgb(59, 130, 245)"
  type="line-scale"
>
</ngx-spinner>
